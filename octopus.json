{
    "workDir": ".",
    "dependencies": [
        {
            "name": "ethadapter",
            "src": "https://github.com/PharmaLedger-IMI/ethadapter.git",
            "actions": [
                {
                    "type": "smartClone",
                    "target": ".",
                    "collectLog": false
                }
            ]
        }
    ],
    "deploy-blockchain":[
        {
            "name": "start goQuorum as in quorum/deploy-quorum.sh",
            "src": ".",
            "actions": [
                {
                    "type": "execute",
                    "cmd": "cd quorum && docker-compose up -d"
                }
            ]
        },
        {
            "name": "Start blockchain explorer as in blockchain-explorer/deploy-explorer.sh",
            "src": ".",
            "actions": [
                {
                    "type": "execute",
                    "cmd": "cd blockchain-explorer && docker-compose -f docker-compose.yml -f docker-compose-quorum.yml up -d"
                }
            ]
        },
        {
            "name": "Create Org Account and deploy smart contract",
            "src": ".",
            "actions": [
                {
                    "type": "execute",
                    "cmd": "node bin/createOrgAcc.js"
                },
                {
                    "type": "execute",
                    "cmd": "node bin/deployAnchoringSC.js"
                }
            ]
        },
        {
            "name": "Build ethAdapter docker with env replaced",
            "src": ".",
            "actions": [
                {
                    "comment": "Get a frozen dockerfile - to prevent getting the latest ePi.",
                    "type": "copy",
                    "src": "./configs/ethAdapter_dockerfile",
                    "target": "./ethadapter/EthAdapter/dockerfile",
                    "options": {
                        "overwrite": true
                    }
                },
                {
                    "type": "execute",
                    "cmd": "node bin/deployEthAdapter.js"
                },
                {
                    "type": "execute",
                    "cmd": "cd ethadapter/EthAdapter && docker-compose up -d"
                }
            ]
        }
    ]
}
